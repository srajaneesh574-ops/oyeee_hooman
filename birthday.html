<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Magic üêº</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap');

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: 'Poppins', sans-serif; background: #000; color: white; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .bg-luxury { background: radial-gradient(circle at center, #2c041c 0%, #000 100%); width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
        .glass-card { width: 95%; max-width: 400px; height: 90vh; background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(25px); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 40px; display: flex; flex-direction: column; align-items: center; padding: 20px; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.8); position: relative; overflow: hidden; }
        
        .section { display: none; width: 100%; flex-direction: column; align-items: center; position: absolute; top: 0; left: 0; height: 100%; padding: 20px; box-sizing: border-box; }
        .active { display: flex !important; animation: fadeIn 0.8s ease; }

        /* --- ENVELOPE GLOW --- */
        .glowing-env { font-size: 6rem; cursor: pointer; filter: drop-shadow(0 0 20px #d4af37); animation: pulseGlow 2s infinite; }
        @keyframes pulseGlow { 0% { filter: drop-shadow(0 0 10px #d4af37); } 50% { filter: drop-shadow(0 0 30px #f9e29c); } 100% { filter: drop-shadow(0 0 10px #d4af37); } }

        /* --- PANDA & SCAN --- */
        .panda-box { position: relative; width: 120px; height: 120px; margin-bottom: 10px; border-radius: 15px; overflow: hidden; }
        .panda-img { width: 100%; height: 100%; object-fit: contain; }
        .scan-line { width: 100%; height: 4px; background: #00ff00; position: absolute; top: 0; left: 0; box-shadow: 0 0 15px #00ff00; animation: scanning 3s infinite linear; z-index: 5; }

        /* --- BANNER & BALLOONS --- */
        .banner-unit { position: absolute; top: 2%; width: 100%; display: flex; justify-content: center; align-items: flex-end; }
        .balloon-bunch { font-size: 2.5rem; line-height: 0.5; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5)); animation: sway 3s infinite alternate; }
        .curved-text { display: flex; align-items: flex-end; margin: 0 10px; }
        .char { background: #1a1a1a; color: #d4af37; padding: 5px 4px; font-weight: bold; font-size: 0.6rem; border: 0.5px solid #d4af37; margin: 0 1px; transform: translateY(var(--y)); }
        .gap { width: 12px; }

        /* --- LAYOUT --- */
        .gallery-suite { position: absolute; top: 22%; display: flex; gap: 10px; }
        .polaroid { width: 75px; background: #fff; padding: 5px 5px 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.5); transform: rotate(var(--r)); }
        .polaroid img { width: 100%; height: 75px; object-fit: cover; }
        .vid-frame { width: 100%; height: 70%; border: 2px solid #d4af37; border-radius: 20px; overflow: hidden; background: #000; display: flex; align-items: center; justify-content: center; }
        video { width: 100%; height: 100%; object-fit: contain; }

        /* --- FLYING BALLOONS --- */
        .balloon-fly { position: absolute; bottom: -80px; width: 35px; height: 45px; border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%; z-index: 999; animation: riseUp 5s forwards linear; }
        .balloon-fly::after { content: ''; position: absolute; bottom: -30px; left: 50%; width: 1px; height: 30px; background: rgba(255,255,255,0.4); }

        .btn-luxury { background: linear-gradient(135deg, #d4af37 0%, #f9e29c 50%, #b38728 100%); border: none; padding: 12px 25px; color: #000; font-weight: 800; border-radius: 50px; cursor: pointer; text-transform: uppercase; font-size: 0.7rem; margin: 10px 0; }
        .handwriting { font-family: 'Dancing Script', cursive; font-size: 1.4rem; color: #d4af37; }
        .sticker-circle { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #d4af37; position: absolute; object-fit: cover; z-index: 10; }

        @keyframes scanning { 0% { top: 0; } 100% { top: 100%; } }
        @keyframes riseUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-120vh); opacity: 0; } }
        @keyframes sway { from { transform: rotate(-3deg); } to { transform: rotate(3deg); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .confetti { position: absolute; width: 8px; height: 8px; z-index: 1000; animation: burst 2.5s ease-out forwards; }
        @keyframes burst { 0% { transform: translate(var(--x), 90vh); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) rotate(720deg); opacity: 0; } }
/* --- NEW DECORATION STYLES --- */
/* --- UPDATED DECORATION STYLES --- */
.decoration-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
}

/* Side Bulbs (Static - No Swing) */
.side-bulb {
    position: absolute;
    top: -5%;
    width: 2px;
    height: 200px;
    background: #555;
    /* Removed swing animation */
}

.side-bulb::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: -7px;
    width: 20px;
    height: 20px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 0 20px #f9e29c, 0 0 40px #d4af37;
}

.side-bulb.left { left: 8%; }
.side-bulb.right { right: 8%; }

/* Rainbow LED String (Bigger Size) */
.wavy-string {
    position: absolute;
    top: 85px; 
    left: 15%;
    width: 70%;
    height: 40px;
    border: 1px solid rgba(255,255,255,0.2);
    border-top: none;
    border-radius: 0 0 50% 50%;
    display: flex;
    justify-content: space-around;
    align-items: flex-end;
}

.led-dot {
    width: 15px; /* Increased size */
    height: 15px; /* Increased size */
    border-radius: 50%;
    animation: rainbowChasing 2s infinite linear;
}

@keyframes rainbowChasing {
    0% { background: #ff4d4d; box-shadow: 0 0 10px #ff4d4d; }
    33% { background: #4d4dff; box-shadow: 0 0 10px #4d4dff; }
    66% { background: #4dff4d; box-shadow: 0 0 10px #4dff4d; }
    100% { background: #ff4d4d; box-shadow: 0 0 10px #ff4d4d; }
}
@keyframes burstUp {
    0% { 
        transform: translateY(0) scale(1) rotate(0deg); 
        opacity: 1; 
    }
    100% { 
        /* This moves them 90% up the screen height */
        transform: translateY(-90vh) scale(0.5) rotate(720deg); 
        opacity: 0; 
    }
}
/* --- COOL ENVELOPE INTRO --- */
.glowing-env {
    font-size: 7rem; /* Slightly larger for impact */
    cursor: pointer;
    transition: transform 0.5s ease;
    animation: floating 3s ease-in-out infinite, pulseGlow 2s infinite;
}

.glowing-env:hover {
    transform: scale(1.1) rotate(5deg);
}

@keyframes floating {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

/* Luxury Shine Effect */
#p_start::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(212,175,55,0.1) 0%, transparent 70%);
    pointer-events: none;
}
/* Specific fix for the last page buttons */
.btn-final {
    padding: 12px 30px !important; 
    font-size: 1.8rem !important;  /* This makes the ü™Ñ and üö™ much bigger */
    min-width: 90px;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    line-height: 1;
}
.bg-luxury { 
    background: radial-gradient(circle at center, #2c041c 0%, #000 100%); 
    width: 100%; 
    height: 100%; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    /* This tells the background to use the "Pulse" instructions */
    animation: backgroundPulse 8s infinite alternate ease-in-out; 
}
/* This part defines WHAT the "Pulse" actually does */
@keyframes backgroundPulse {
    0% { filter: brightness(1); }
    100% { filter: brightness(1.3); }
}
    </style>
</head>
<body>

    <audio id="hbdSong" loop><source src="fav.mpeg" type="audio/mp4"></audio>
    <audio id="footsteps"><source src="footsteps.mpeg" type="audio/mp4"></audio>
    <audio id="creak"><source src="door_creak.mpeg" type="audio/mp4"></audio>

    <div class="bg-luxury">
        <div class="glass-card" id="cardContainer">
            
            <div id="p_start" class="section active" style="justify-content:center;">
    <div class="glowing-env" onclick="showNext('invite')">‚úâÔ∏è</div>
    <div class="intro-text" style="margin-top: 20px;">
        <p class="handwriting" style="letter-spacing: 2px; opacity: 0.8;">A Special Delivery for You</p>
        <p style="font-size: 0.6rem; text-transform: uppercase; letter-spacing: 4px; color: #d4af37;">Tap to Reveal</p>
    </div>
</div>
            <div id="p_invite" class="section" style="justify-content:center;">
                <div class="panda-box">
                    <img src="panda.jpeg" class="panda-img" alt="Panda">
                    <div class="scan-line" id="scanner"></div>
                </div>
                <div id="secTxt" class="handwriting"></div>
                <img src="invitation_card.jpeg" id="invImg" style="width:75%; border-radius:15px; display:none; border:1px solid #d4af37; margin-top:10px;">
                <button class="btn-luxury" id="btn1" style="display:none;" onclick="showNext('teaser')">YOUR WELCOME</button>
            </div>

            <div id="p_teaser" class="section">
                <div class="vid-frame"><video id="teaserVid" loop muted playsinline><source src="teaser.mp4" type="video/mp4"></video></div>
                <button class="btn-luxury" onclick="playWalk()">STEP INTO UR CELEBRATION</button>
            </div>

            <div id="p_entry" class="section" style="justify-content:center;">
                <div style="font-size:4rem;">üë£</div>
                <button id="doorBtn" class="btn-luxury" style="display:none;" onclick="openDoor()">UNLOCK UR SURPRISE</button>
            </div>

            <div id="p_dark" class="section" style="background:#000; justify-content:center;">
                <button class="btn-luxury" onclick="turnOnLights()">LIGHTS ON !!!üí°</button>
            </div>

            <div id="p_party" class="section">
<div class="decoration-layer">
    <div class="side-bulb left"></div>
    <div class="side-bulb right"></div>

    <div class="wavy-string">
        <div class="led-dot" style="animation-delay: 0s;"></div>
        <div class="led-dot" style="animation-delay: 0.4s;"></div>
        <div class="led-dot" style="animation-delay: 0.8s;"></div>
        <div class="led-dot" style="animation-delay: 1.2s;"></div>
        <div class="led-dot" style="animation-delay: 1.6s;"></div>
    </div>
</div>                <div class="banner-unit">
                    <div class="balloon-bunch">üéà<br>üéà</div>
                    <div class="curved-text">
                        <div class="char" style="--y:10px">H</div><div class="char" style="--y:5px">A</div><div class="char" style="--y:2px">P</div><div class="char" style="--y:0px">P</div><div class="char" style="--y:2px">Y</div>
                        <div class="gap"></div>
                        <div class="char" style="--y:0px">B</div><div class="char" style="--y:2px">I</div><div class="char" style="--y:5px">R</div><div class="char" style="--y:10px">T</div><div class="char" style="--y:14px">H</div><div class="char" style="--y:10px">D</div><div class="char" style="--y:5px">A</div><div class="char" style="--y:2px">Y</div>
                    </div>
                    <div class="balloon-bunch">üéà<br>üéà</div>
                </div>

                <div class="gallery-suite">
                    <div class="polaroid" style="--r:-6deg;"><img src="pic1.jpeg"></div>
                    <div class="polaroid" style="--r:2deg;"><img src="pic2.jpeg"></div>
                    <div class="polaroid" style="--r:6deg;"><img src="pic3.jpeg"></div>
                </div>

                <div style="position:absolute; bottom:18%; display:flex; flex-direction:column; align-items:center; width:100%;">
                    <img src="panda.jpeg"class="bounce" style="width:112px; height:112px; object-fit:contain; margin-bottom:30px;">
                    <div id="partyBtns">
                        <button class="btn-luxury" onclick="spawnBalloons()">RELEASE BALLOONSüéà</button>
                        <button class="btn-luxury" onclick="showCake()">CAKE TIMEüç∞</button>
                    </div>
                    <div id="cakeSection" style="display:none; flex-direction:column; align-items:center; transform: scale(1.5); margin-bottom: 50px;">
                        <div id="flame" style="width:15px; height:25px; background:orange; border-radius:50%; box-shadow: 0 0 30px 15px rgba(255, 165, 0, 0.6);" onclick="blowCandle()"></div>
                        <div style="width:100px; height:40px; background:#4d2d18; border-radius:8px;"></div>
                        <p class="handwriting" style="font-size:0.9rem;">Tap flame to blow the candle</p>
                    </div>
                </div>
            </div>

            <div id="p_wish" class="section" style="justify-content:center;">
                <h1 class="handwriting">Make a Wish... </h1>
                <div style="font-size:5rem;">üí´</div>
                <button class="btn-luxury" onclick="showNext('gift')">Yea done üòá</button>
            </div>

            <div id="p_gift" class="section" style="justify-content:center;">
                <h1 class="handwriting">!!! Unwrap your gift !!!</h1>
                <div style="font-size:7rem; cursor:pointer;" onclick="showNext('video')">üéÅ</div>
            </div>

            <div id="p_video" class="section">
                <div class="vid-frame"><video id="mainVid" controls playsinline onplay="document.getElementById('hbdSong').volume=0.1" onended="videoEnded()"><source src="birthday_video.mp4" type="video/mp4"></video></div>
                <button id="msgBtn" class="btn-luxury" style="display:none;" onclick="showNext('note')">FINAL NOTEüíå</button>
            </div>

            <div id="p_note" class="section" style="justify-content:center;">
                <div style="background:#fff; padding:40px; border-radius:25px; position:relative; width:80%; color:#000; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                    <img src="sticker_pic.jpeg" class="sticker-circle" style="top:-30px; left:-15px;">
                    <img src="sticker_pic.jpeg" class="sticker-circle" style="bottom:-30px; right:-15px;">
                    <p class="handwriting" id="noteText" style="color:#000; margin:0; line-height:1.4;"></p>
                </div>
                <button class="btn-luxury" style="margin-top:40px;" onclick="showNext('outro')">HAPPY TIMES ‚ú®</button>
            </div>

              <div id="p_outro" class="section" style="justify-content:center;">
    <img src="panda.jpeg" style="width:110px; height:110px; object-fit:contain; margin-bottom: 10px;">
    <h3 class="handwriting" style="margin-bottom: 20px;">Happy Birthday üêßü§ç</h3>
    
    <div style="display:flex; gap:20px; justify-content:center; width: 100%;">
        <button class="btn-luxury btn-final" onclick="location.reload()">ü™Ñ</button>
        <button class="btn-luxury btn-final" onclick="window.close()">üö™</button>
    </div>
</div>

    <script>
        const song = document.getElementById('hbdSong');
        function showNext(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('p_' + id).classList.add('active');
            // Inside your showNext function
if(id === 'invite') {
    // Optional: add a paper opening sound here if you have one
    runScan();
}

            if(id === 'teaser') document.getElementById('teaserVid').play();
            if(id === 'note') typeIt("noteText", "After nearly 8 weeks of preparation , I've finally brought this idea into life.Just a small gesture , crafted with a lot of care for my favourite hoomanüòáü§ç.Hope it brings a smile to your face");
        }
        function runScan() { typeIt("secTxt", "Scanning guest list...", () => { setTimeout(() => { 
    // This instantly changes the "feel" for just this one message
    document.getElementById('secTxt').style.fontFamily = "monospace";
    document.getElementById('secTxt').style.color = "#00ff00";

    typeIt("secTxt", "ACCESS APPROVED ‚úÖ ", () => { document.getElementById('scanner').style.display='none'; document.getElementById('invImg').style.display='block'; document.getElementById('btn1').style.display='block'; }); }, 2000); }); }
        function playWalk() { showNext('entry'); document.getElementById('footsteps').play(); setTimeout(() => { document.getElementById('doorBtn').style.display='block'; }, 4000); }
        function openDoor() { document.getElementById('creak').play(); setTimeout(() => showNext('dark'), 1000); }
        function turnOnLights() { 
    // 1. Your existing music/room logic
    song.play(); 
    showNext('party'); 
    
    // 2. Add this line to trigger the new confetti
    confettiBurst(); 
}

// Keep your current confettiBurst function below it
function confettiBurst() {
    const container = document.getElementById('cardContainer');
    const colors = ['#d4af37', '#f9e29c', '#ffffff', '#ff4d4d', '#4d94ff'];
    
    for (let i = 0; i < 70; i++) {
        const p = document.createElement('div');
        p.className = 'confetti-piece';
        
        const startX = Math.random() * 100; // Random horizontal start
        const drift = (Math.random() - 0.5) * 150; // Random horizontal drift distance
        const color = colors[Math.floor(Math.random() * colors.length)];
        
        p.style.cssText = `
            position: absolute;
            width: 8px;
            height: 8px;
            background: ${color};
            bottom: 0px; 
            left: ${startX}%;
            z-index: 200;
            border-radius: 2px;
            pointer-events: none;
            /* We add the drift here to make it spread out */
            margin-left: ${drift}px;
            animation: burstUp ${1.5 + Math.random() * 2}s ease-out forwards;
        `;
        
        container.appendChild(p);
        setTimeout(() => p.remove(), 4000); 
    }
}
        function showCake() { document.getElementById('partyBtns').style.display='none'; document.getElementById('cakeSection').style.display='flex'; }
        function blowCandle() { document.getElementById('flame').style.display='none'; for(let i=0; i<60; i++) { const p = document.createElement('div'); p.className='confetti'; const side=i%2===0?-30:430; p.style.cssText=`background:hsl(${Math.random()*360},100%,50%); --x:${side}px; --tx:${Math.random()*400-100}px; --ty:${Math.random()*400}px;`; document.getElementById('cardContainer').appendChild(p); } setTimeout(()=>showNext('wish'), 2000); }
        function spawnBalloons() { const colors=['#ff4d4d', '#4d94ff', '#ffd700', '#ff85e0', '#ffffff']; for(let i=0; i<15; i++) { setTimeout(() => { const b=document.createElement('div'); b.className='balloon-fly'; b.style.background=`radial-gradient(circle at 30% 30%, #fff, ${colors[Math.floor(Math.random()*5)]})`; b.style.left=Math.random()*85+'%'; document.getElementById('cardContainer').appendChild(b); setTimeout(()=>b.remove(), 5000); }, i*200); } }
        function typeIt(id, txt, cb) { let i=0; const el=document.getElementById(id); el.innerHTML=""; function t() { if(i<txt.length){ el.innerHTML+=txt.charAt(i); i++; setTimeout(t, 50); } else if(cb) cb(); } t(); }
        function videoEnded() { song.volume=1; document.getElementById('msgBtn').style.display='block'; }
    </script>
</body>
</html>